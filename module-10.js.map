{"version":3,"file":"module-10.js","sources":["../src/js/lecture-10.1/01-promises.js","../src/js/lecture-10.1/02-promisification.js"],"sourcesContent":["/* // Приклад з інтервалом\n{\n  const promise = new Promise((resolve, reject) => {\n    console.log('create promise');\n    setTimeout(() => {\n      resolve('promise resolved');\n    }, 5000);\n  });\n\n  const intervalId = setInterval(() => {\n    console.log(promise);\n  }, 1000);\n\n  // Зупиняємо інтервал після того, як проміс виконається:\n  promise.then(() => {\n    clearInterval(intervalId);\n    console.log('interval stopped');\n  });\n} */\n\n/* // Приклад з обробкою результату промісу\n{\n  const promiseExample = new Promise((resolve, reject) => {\n    const randomNumber = Math.round(Math.random() * 5000) + 2000;\n    console.log(`Random number is ${randomNumber} ms`);\n    setTimeout(resolve, randomNumber);\n  });\n  console.log(promiseExample);\n\n  function onResolved() {\n    console.log('Nice');\n    console.log('Promise resolved');\n  }\n  function onRejected() {\n    console.log('Promise rejected');\n  }\n\n  promiseExample.then(onResolved, onRejected);\n  // або так:\n  promiseExample.then(onResolved).catch(onRejected);\n\n  // зручно для inline функцій:\n  promiseExample\n    .then(() => {\n      console.log('Проміс готовий');\n    })\n    .catch(() => {\n      console.log('Проміс помилка');\n    });\n} */\n\n// Приклад з випадковим успіхом/помилкою\n{\n  const promiseExample = new Promise((resolve, reject) => {\n    const randomNumber = Math.round(Math.random() * 5000) + 2000;\n    console.log(randomNumber);\n\n    setTimeout(() => {\n      if (randomNumber % 2 === 0) resolve('Смачного!');\n      else reject('Поки не готово!');\n    }, randomNumber);\n  });\n\n  promiseExample\n    .then(x => {\n      console.log(x);\n      console.log('Danke schön');\n    })\n    .catch(y => {\n      console.log(y);\n      console.log('Ich bin nicht zufrieden');\n    })\n    .finally(() => {\n      console.log('Дякую, що дочитали до кінця!');\n    }); // finally виконається в будь-якому випадку\n}\n\n// Ланцюжки промісів\n{\n  const promise = new Promise((resolve, reject) => {\n    console.log('Проміс стартував...');\n    setTimeout(() => {\n      resolve(); // успішно завершуємо через 1 секунду\n    }, 1000);\n  });\n\n  // Ланцюжок промісів\n  promise\n    .then(() => {\n      console.log('Перший .then — повертаємо 10');\n      return 10;\n    })\n    .catch(() => {\n      console.log('Це НЕ виконається, бо проміс успішний');\n      return 20;\n    })\n    .then(res => {\n      console.log('Другий .then — отримали:', res); // 10\n      return res * 3; // 10 * 3 = 30\n    })\n    .then(res1 => {\n      console.log('Третій .then — отримали:', res1); // 30\n      return res1 * 3; // 30 * 3 = 90\n    })\n    .then(result => {\n      console.log('Фінальний результат:', result); // 90\n      console.log('Готово! Вивело 90');\n    })\n    .catch(err => {\n      console.error('Помилка:', err);\n    });\n}\n\n/* // Задача, приклад. Ланцюжки промісів\n{\n  // Крок 1: Закип'ятити воду\n  function boilWater() {\n    return new Promise(resolve => {\n      console.log('Починаю кип’ятити воду...'); // \"Починаю кип’ятити воду...\"\n      setTimeout(() => {\n        console.log('Вода закипіла!');\n        resolve('гаряча вода');\n      }, 2000);\n    });\n  }\n\n  // Крок 2: Засипати каву\n  function addCoffee(hotWater) {\n    return new Promise(resolve => {\n      console.log('Засипаю каву в', hotWater);\n      setTimeout(() => {\n        console.log('Кава заварена!');\n        resolve('смачна кава ☕');\n      }, 1000);\n    });\n  }\n\n  // Крок 3: Додати цукор (якщо хочеш)\n  function addSugar(coffee) {\n    return new Promise(resolve => {\n      console.log('Додаю цукор у', coffee);\n      setTimeout(() => {\n        resolve('солодка кава');\n      }, 500);\n    });\n  }\n\n  // Крок 4: Пити каву\n  function drink(coffee) {\n    console.log('П’ю каву... Аааа, яка смачна!', coffee);\n    console.log('День почався чудово!');\n  }\n\n  // ЗАПУСКАЄМО ЛАНЦЮЖОК!\n  boilWater()\n    .then(water => addCoffee(water)) // передаємо воду в наступний крок\n    .then(coffee => addSugar(coffee)) // передаємо каву далі\n    .then(sweetCoffee => drink(sweetCoffee))\n    .catch(error => {\n      console.error('Щось пішло не так:', error);\n    });\n}\n */\n","//Промисифікація синхронних функцій\n// Promise.resolve()\n// Promise.reject()\n\n//Варіанти промисифікації\n{\n  //Повернення промісу\n  {\n    function foo(x, y) {\n      const sum = x + yF;\n\n      const myValue = new Promise(res => {\n        res(sum);\n      });\n\n      return myValue;\n    }\n  }\n  //Повернення промісу\n  {\n    function foo(x, y) {\n      const sum = x + y;\n      return Promise.resolve(sum);\n    }\n  }\n}\n\n//Промисифікована функція\nfunction createPromise(value, isPositive, delay) {\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (isPositive) resolve(value);\n      else reject(value);\n    }, delay);\n  });\n\n  return promise;\n}\n\nconst p1 = createPromise('Promise1', true, 5000);\nconst p2 = createPromise('Promise2', false, 2000);\nconst p3 = createPromise('Promise3', true, 1000);\nconst p4 = createPromise('Promise4', false, 3000);\nconst p5 = createPromise('Promise5', true, 4000);\n\nfunction onFulfilled(result) {\n  console.log('fine', result);\n}\nfunction onRejected(result) {\n  console.log('sad', result);\n}\n\np1.then(onFulfilled, onRejected);\np2.then(onFulfilled, onRejected);\np3.then(onFulfilled, onRejected);\np4.then(onFulfilled, onRejected);\np5.then(onFulfilled, onRejected);\n"],"names":["resolve","reject","randomNumber","x","y","res","res1","result","err","createPromise","value","isPositive","delay","p1","p2","p3","p4","p5","onFulfilled","onRejected"],"mappings":"wFAqDyB,IAAI,QAAQ,CAACA,EAASC,IAAW,CACtD,MAAMC,EAAe,KAAK,MAAM,KAAK,SAAW,GAAI,EAAI,IACxD,QAAQ,IAAIA,CAAY,EAExB,WAAW,IAAM,CACXA,EAAe,IAAM,EAAGF,EAAQ,WAAW,EAC1CC,EAAO,iBAAiB,CAC9B,EAAEC,CAAY,CACnB,CAAG,EAGE,KAAKC,GAAK,CACT,QAAQ,IAAIA,CAAC,EACb,QAAQ,IAAI,aAAa,CAC/B,CAAK,EACA,MAAMC,GAAK,CACV,QAAQ,IAAIA,CAAC,EACb,QAAQ,IAAI,yBAAyB,CAC3C,CAAK,EACA,QAAQ,IAAM,CACb,QAAQ,IAAI,8BAA8B,CAChD,CAAK,EAKa,IAAI,QAAQ,CAACJ,EAASC,IAAW,CAC/C,QAAQ,IAAI,qBAAqB,EACjC,WAAW,IAAM,CACfD,GACD,EAAE,GAAI,CACX,CAAG,EAIE,KAAK,KACJ,QAAQ,IAAI,8BAA8B,EACnC,GACR,EACA,MAAM,KACL,QAAQ,IAAI,uCAAuC,EAC5C,GACR,EACA,KAAKK,IACJ,QAAQ,IAAI,2BAA4BA,CAAG,EACpCA,EAAM,EACd,EACA,KAAKC,IACJ,QAAQ,IAAI,2BAA4BA,CAAI,EACrCA,EAAO,EACf,EACA,KAAKC,GAAU,CACd,QAAQ,IAAI,uBAAwBA,CAAM,EAC1C,QAAQ,IAAI,mBAAmB,CACrC,CAAK,EACA,MAAMC,GAAO,CACZ,QAAQ,MAAM,WAAYA,CAAG,CACnC,CAAK,EClFL,SAASC,EAAcC,EAAOC,EAAYC,EAAO,CAQ/C,OAPgB,IAAI,QAAQ,CAACZ,EAASC,IAAW,CAC/C,WAAW,IAAM,CACXU,EAAYX,EAAQU,CAAK,EACxBT,EAAOS,CAAK,CAClB,EAAEE,CAAK,CACZ,CAAG,CAGH,CAEA,MAAMC,EAAKJ,EAAc,WAAY,GAAM,GAAI,EACzCK,EAAKL,EAAc,WAAY,GAAO,GAAI,EAC1CM,EAAKN,EAAc,WAAY,GAAM,GAAI,EACzCO,EAAKP,EAAc,WAAY,GAAO,GAAI,EAC1CQ,EAAKR,EAAc,WAAY,GAAM,GAAI,EAE/C,SAASS,EAAYX,EAAQ,CAC3B,QAAQ,IAAI,OAAQA,CAAM,CAC5B,CACA,SAASY,EAAWZ,EAAQ,CAC1B,QAAQ,IAAI,MAAOA,CAAM,CAC3B,CAEAM,EAAG,KAAKK,EAAaC,CAAU,EAC/BL,EAAG,KAAKI,EAAaC,CAAU,EAC/BJ,EAAG,KAAKG,EAAaC,CAAU,EAC/BH,EAAG,KAAKE,EAAaC,CAAU,EAC/BF,EAAG,KAAKC,EAAaC,CAAU"}